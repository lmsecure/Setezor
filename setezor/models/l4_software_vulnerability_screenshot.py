
from setezor.models import IDDependent, Base
from sqlmodel import Field, Relationship
from typing import Optional

class L4SoftwareVulnerabilityScreenshot(IDDependent, Base, table=True):
    __tablename__ = "network_port_software_vulnerability_screenshot"
    __table_args__ = {
        "comment": "Таблица предназначена для хранения скриншотов уязвимостей на ресурсе с определённым софтом"
    }
    
    note: Optional[str]                     = Field(sa_column_kwargs={"comment": "Заметка для скриншота"})
    l4_software_vulnerability_id: str       = Field(foreign_key="network_port_software_vulnerability.id", sa_column_kwargs={"comment":"Идентификатор софта на ресурсе"})
    screenshot_id: Optional[str]                      = Field(foreign_key="screenshot.id", sa_column_kwargs={"comment":"Идентификатор скриншота уязвимости"})
    
    l4_software_vulnerability: "L4SoftwareVulnerability" = Relationship(back_populates="screenshots") # type: ignore
    screenshot: "Screenshot" = Relationship(back_populates="l4_software_vulnerabilities") # type: ignore